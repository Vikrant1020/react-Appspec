# Node.js with React


# Build a Node.js project that uses React.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
- main

pool:
  vmImage: ubuntu-latest
  
jobs:
- job: testin1
  displayName: Build
  steps:
  - task: NodeTool@0
    inputs:
      versionSpec: '14.x'
    displayName: 'Install Node.js'

  - script: |
      npm install
      npm run build
    displayName: 'npm install and build'
  - task: DownloadBuildArtifacts@1
    inputs:
      buildType: 'current'
      downloadType: 'specific'
      downloadPath: '$(System.ArtifactsDirectory)'
  - task: CopyPublishBuildArtifacts@1
    inputs:
      Contents: 'build'
      ArtifactName: 'build'
      ArtifactType: 'FilePath'
  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '/home/'
      ArtifactName: 'testing'


# jobs: 
# - deployment: VMDeploy
#   displayName: web
#   environment:
#     name: <environment name>
#     resourceType: VirtualMachine
#   strategy:
#     rolling:
#         maxParallel: 2  #for percentages, mention as x%
          
#         deploy:
#           steps:
#           - task: DownloadBuildArtifacts@1
#             inputs:
#               buildType: 'current'
#               downloadType: 'specific'
#               downloadPath: '$(System.ArtifactsDirectory)'
#           - task: Bash@3
#             inputs:
#               targetType: 'inline'
#               script: |
#                 # Modify deployment script based on the app type
#                 echo "Starting deployment script run"
#                 # sudo java -jar '$(Pipeline.Workspace)/drop/**/target/*.jar' 
